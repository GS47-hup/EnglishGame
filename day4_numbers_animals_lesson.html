<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day 4: Numbers & Animals | Interactive Learning</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', Arial, sans-serif;
            background: linear-gradient(135deg, #e8f5e8 0%, #f0f8ff 50%, #fff8dc 100%);
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            background: linear-gradient(45deg, #228b22, #32cd32, #00ced1);
            color: white;
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        h1 {
            font-size: 2.8em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .lesson-info {
            font-size: 1.3em;
            opacity: 0.9;
        }

        .section-tabs {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
        }

        .tab-button {
            background: linear-gradient(45deg, #4682b4, #5f9ea0);
            color: white;
            border: none;
            border-radius: 15px;
            padding: 12px 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .tab-button:hover {
            background: linear-gradient(45deg, #5f9ea0, #4682b4);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .tab-button.active {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            transform: scale(1.05);
        }

        .lesson-section {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .lesson-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .game-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 25px 0;
        }

        .game-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 3px solid transparent;
        }

        .game-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
            border-color: #32cd32;
        }

        .game-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .game-icon {
            font-size: 3.5em;
            margin-bottom: 15px;
            display: block;
        }

        .game-title {
            font-size: 1.8em;
            color: #228b22;
            margin-bottom: 8px;
            font-weight: bold;
        }

        .game-description {
            color: #666;
            font-size: 1.1em;
            margin-bottom: 15px;
        }

        .vocab-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 12px;
            margin: 20px 0;
        }

        .vocab-item {
            background: linear-gradient(45deg, #e6f3ff, #f0f8ff);
            border-radius: 15px;
            padding: 15px 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid #ddd;
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .vocab-item:hover {
            background: linear-gradient(45dddeg, #b3d9ff, #cce7ff);
            transform: scale(1.05);
            border-color: #32cd32;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .vocab-emoji {
            font-size: 2.2em;
            display: block;
            margin-bottom: 8px;
        }

        .vocab-word {
            font-weight: bold;
            color: #333;
            font-size: 1em;
        }

        .play-button {
            background: linear-gradient(45deg, #32cd32, #228b22);
            color: white;
            border: none;
            border-radius: 15px;
            padding: 15px 30px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            margin: 10px;
            min-width: 160px;
        }

        .play-button:hover {
            background: linear-gradient(45deg, #228b22, #32cd32);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .number-display {
            display: inline-block;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            font-size: 2.5em;
            font-weight: bold;
            padding: 20px 30px;
            border-radius: 50%;
            margin: 10px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: all 0.3s ease;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
            min-width: 80px;
            text-align: center;
        }

        .number-display:hover {
            transform: scale(1.15);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }

        .animal-category {
            background: linear-gradient(45deg, #20b2aa, #48d1cc);
            color: white;
            padding: 15px 25px;
            border-radius: 15px;
            margin: 10px 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-block;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .animal-category:hover, .animal-category.active {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .counting-area {
            background: linear-gradient(135deg, #fff5ee, #faebd7);
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
            border: 3px solid #ddd;
        }

        .animals-display {
            font-size: 3em;
            margin: 20px 0;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .preposition-demo {
            background: linear-gradient(135deg, #f0f8ff, #e6f3ff);
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            border: 2px solid #4682b4;
            text-align: center;
        }

        .preposition-item {
            background: linear-gradient(45deg, #9370db, #8a2be2);
            color: white;
            padding: 12px 20px;
            border-radius: 12px;
            margin: 8px;
            cursor: pointer;
            display: inline-block;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .preposition-item:hover {
            background: linear-gradient(45deg, #8a2be2, #9370db);
            transform: scale(1.05);
            box-shadow: 0 6px 18px rgba(0,0,0,0.3);
        }

        .score-board {
            text-align: center;
            background: linear-gradient(45deg, #ffd700, #ffed4a);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border: 3px solid #f39c12;
        }

        .score {
            font-size: 2.2em;
            font-weight: bold;
            color: #b8860b;
            margin: 10px 0;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }

        .celebration {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(45deg, #32cd32, #228b22);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            z-index: 1000;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            animation: celebrationPop 0.6s ease;
        }

        @keyframes celebrationPop {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }

        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }

        .review-box {
            background: linear-gradient(135deg, #ffe4e1, #ffd1dc);
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            border: 2px solid #ff69b4;
        }

        .integration-example {
            background: linear-gradient(135deg, #e0ffff, #f0ffff);
            border-radius: 15px;
            padding: 15px;
            margin: 10px 0;
            border-left: 5px solid #00ced1;
            font-style: italic;
            font-weight: bold;
        }

        /* Interactive Preposition Game Styles */
        .preposition-playground {
            position: relative;
            width: 100%;
            height: 300px;
            background: linear-gradient(135deg, #e8f5e8 0%, #b8e6b8 50%, #87ceeb 100%);
            border: 3px solid #ddd;
            border-radius: 20px;
            margin: 20px 0;
            overflow: hidden;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.1);
        }

        .reference-object {
            font-size: 2.5em;
            cursor: default;
            text-align: center;
            user-select: none;
            z-index: 1;
        }

        .object-label {
            font-size: 0.3em;
            background: rgba(255,255,255,0.9);
            border-radius: 10px;
            padding: 2px 6px;
            margin-top: 5px;
            color: #333;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .draggable-animal {
            font-size: 2em;
            cursor: grab;
            text-align: center;
            user-select: none;
            transition: all 0.3s ease;
            z-index: 10;
            border-radius: 50%;
            padding: 5px;
            background: rgba(255,255,255,0.9);
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        .draggable-animal:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .draggable-animal:active {
            cursor: grabbing;
            transform: scale(1.2);
        }

        .animal-label {
            font-size: 0.4em;
            background: rgba(255,255,255,0.95);
            border-radius: 8px;
            padding: 2px 5px;
            margin-top: 3px;
            color: #333;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .preposition-sentence {
            background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 15px;
            font-size: 1.1em;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .draggable-animal.being-dragged {
            opacity: 0.7;
            transform: scale(1.2) rotate(5deg);
            z-index: 100;
        }

        /* Mobile responsive */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .game-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            h1 {
                font-size: 2.2em;
            }
            
            .number-display {
                font-size: 2em;
                padding: 15px 20px;
                margin: 5px;
            }
            
            .animals-display {
                font-size: 2.5em;
            }
        }

        /* Print-friendly styles */
        @media print {
            body {
                background: white;
                color: black;
            }
            
            .game-card {
                border: 2px solid black;
                break-inside: avoid;
                margin-bottom: 20px;
            }
            
            .play-button, .tab-button {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ”¢ğŸ¦ Day 4: Numbers & Animals ğŸ„ğŸŸ</h1>
            <div class="lesson-info">Interactive Learning: Numbers 6-10 + Animal Categories + Prepositions</div>
        </header>

        <!-- Section Navigation -->
        <div class="section-tabs">
            <button class="tab-button active" onclick="showSection('review')">ğŸ“š Days 1-3 Review</button>
            <button class="tab-button" onclick="showSection('numbers')">ğŸ”¢ Numbers 6-10</button>
            <button class="tab-button" onclick="showSection('zoo')">ğŸ¦ Zoo Animals</button>
            <button class="tab-button" onclick="showSection('farm')">ğŸ„ Farm Animals</button>
            <button class="tab-button" onclick="showSection('sea')">ğŸŸ Sea Animals</button>
            <button class="tab-button" onclick="showSection('prepositions')">ğŸ“ Prepositions</button>
            <button class="tab-button" onclick="showSection('integration')">ğŸ¯ Integration Games</button>
        </div>

        <!-- Review Section -->
        <div id="review" class="lesson-section active">
            <h2>ğŸ“š Days 1-3 Review Activities</h2>
            
            <div class="game-grid">
                <div class="game-card">
                    <div class="game-header">
                        <span class="game-icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</span>
                        <h3 class="game-title">Family & Greetings</h3>
                        <p class="game-description">Review family members and greetings</p>
                    </div>
                    <div class="review-box">
                        <p><strong>Pattern:</strong> "Hello! This is my father. He has brown hair."</p>
                        <button class="play-button" onclick="startReviewGame('family')">ğŸ® Practice Greetings</button>
                    </div>
                </div>

                <div class="game-card">
                    <div class="game-header">
                        <span class="game-icon">ğŸŒˆğŸ”º</span>
                        <h3 class="game-title">Colors & Shapes</h3>
                        <p class="game-description">Find and count colored shapes</p>
                    </div>
                    <div class="review-box">
                        <p><strong>Pattern:</strong> "I found a red circle clock. There are five rectangle books."</p>
                        <button class="play-button" onclick="startReviewGame('shapes')">ğŸ® Shape Hunt</button>
                    </div>
                </div>

                <div class="game-card">
                    <div class="game-header">
                        <span class="game-icon">ğŸ ğŸ“</span>
                        <h3 class="game-title">House & Supplies</h3>
                        <p class="game-description">Describe rooms with supplies</p>
                    </div>
                    <div class="review-box">
                        <p><strong>Pattern:</strong> "In my kitchen, there are two rectangle windows. I use a blue pen."</p>
                        <button class="play-button" onclick="startReviewGame('house')">ğŸ® House Description</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Numbers 6-10 Section -->
        <div id="numbers" class="lesson-section">
            <h2>ğŸ”¢ Numbers 6-10 Practice</h2>
            
            <div class="counting-area">
                <h3>Learn Numbers 6-10</h3>
                <div style="margin: 20px 0;">
                    <span class="number-display" onclick="playNumberAudio('six')">6</span>
                    <span class="number-display" onclick="playNumberAudio('seven')">7</span>
                    <span class="number-display" onclick="playNumberAudio('eight')">8</span>
                    <span class="number-display" onclick="playNumberAudio('nine')">9</span>
                    <span class="number-display" onclick="playNumberAudio('ten')">10</span>
                </div>
                <button class="play-button" onclick="startNumbersGame()">ğŸ® Start Counting Game</button>
            </div>

            <div class="game-grid">
                <div class="game-card">
                    <div class="game-header">
                        <span class="game-icon">ğŸ“š</span>
                        <h3 class="game-title">Classroom Counting</h3>
                        <p class="game-description">Count objects in the classroom</p>
                    </div>
                    <div id="classroomCounting" class="counting-area">
                        <div id="countingQuestion">How many books?</div>
                        <div class="animals-display" id="objectsToCount">ğŸ“šğŸ“šğŸ“šğŸ“šğŸ“šğŸ“š</div>
                        <div style="margin: 15px 0;">
                            <button class="number-display" onclick="selectCount(6)">6</button>
                            <button class="number-display" onclick="selectCount(7)">7</button>
                            <button class="number-display" onclick="selectCount(8)">8</button>
                            <button class="number-display" onclick="selectCount(9)">9</button>
                            <button class="number-display" onclick="selectCount(10)">10</button>
                        </div>
                        <div class="score-board">Score: <span class="score" id="countingScore">0</span></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Zoo Animals Section -->
        <div id="zoo" class="lesson-section">
            <h2>ğŸ¦ Zoo Animals</h2>
            
            <div class="game-grid">
                <div class="game-card">
                    <div class="game-header">
                        <span class="game-icon">ğŸ¦</span>
                        <h3 class="game-title">Zoo Animal Vocabulary</h3>
                        <p class="game-description">Learn 8 zoo animals</p>
                    </div>
                    
                    <div class="vocab-grid">
                        <div class="vocab-item" onclick="playAudio('monkey')">
                            <span class="vocab-emoji">ğŸ’</span>
                            <span class="vocab-word">monkey</span>
                        </div>
                        <div class="vocab-item" onclick="playAudio('elephant')">
                            <span class="vocab-emoji">ğŸ˜</span>
                            <span class="vocab-word">elephant</span>
                        </div>
                        <div class="vocab-item" onclick="playAudio('tiger')">
                            <span class="vocab-emoji">ğŸ…</span>
                            <span class="vocab-word">tiger</span>
                        </div>
                        <div class="vocab-item" onclick="playAudio('bear')">
                            <span class="vocab-emoji">ğŸ»</span>
                            <span class="vocab-word">bear</span>
                        </div>
                        <div class="vocab-item" onclick="playAudio('giraffe')">
                            <span class="vocab-emoji">ğŸ¦’</span>
                            <span class="vocab-word">giraffe</span>
                        </div>
                        <div class="vocab-item" onclick="playAudio('lion')">
                            <span class="vocab-emoji">ğŸ¦</span>
                            <span class="vocab-word">lion</span>
                        </div>
                        <div class="vocab-item" onclick="playAudio('zebra')">
                            <span class="vocab-emoji">ğŸ¦“</span>
                            <span class="vocab-word">zebra</span>
                        </div>
                        <div class="vocab-item" onclick="playAudio('kangaroo')">
                            <span class="vocab-emoji">ğŸ¦˜</span>
                            <span class="vocab-word">kangaroo</span>
                        </div>
                    </div>
                    
                    <button class="play-button" onclick="startZooGame()">ğŸ® Zoo Counting Game</button>
                </div>
            </div>
        </div>

        <!-- Farm Animals Section -->
        <div id="farm" class="lesson-section">
            <h2>ğŸ„ Farm Animals</h2>
            
            <div class="game-grid">
                <div class="game-card">
                    <div class="game-header">
                        <span class="game-icon">ğŸ„</span>
                        <h3 class="game-title">Farm Animal Vocabulary</h3>
                        <p class="game-description">Learn 7 farm animals</p>
                    </div>
                    
                    <div class="vocab-grid">
                        <div class="vocab-item" onclick="playAudio('cow')">
                            <span class="vocab-emoji">ğŸ„</span>
                            <span class="vocab-word">cow</span>
                        </div>
                        <div class="vocab-item" onclick="playAudio('horse')">
                            <span class="vocab-emoji">ğŸ´</span>
                            <span class="vocab-word">horse</span>
                        </div>
                        <div class="vocab-item" onclick="playAudio('sheep')">
                            <span class="vocab-emoji">ğŸ‘</span>
                            <span class="vocab-word">sheep</span>
                        </div>
                        <div class="vocab-item" onclick="playAudio('chicken')">
                            <span class="vocab-emoji">ğŸ”</span>
                            <span class="vocab-word">chicken</span>
                        </div>
                        <div class="vocab-item" onclick="playAudio('duck')">
                            <span class="vocab-emoji">ğŸ¦†</span>
                            <span class="vocab-word">duck</span>
                        </div>
                        <div class="vocab-item" onclick="playAudio('goat')">
                            <span class="vocab-emoji">ğŸ</span>
                            <span class="vocab-word">goat</span>
                        </div>
                        <div class="vocab-item" onclick="playAudio('pig')">
                            <span class="vocab-emoji">ğŸ·</span>
                            <span class="vocab-word">pig</span>
                        </div>
                    </div>
                    
                    <button class="play-button" onclick="startFarmGame()">ğŸ® Farm Classification Game</button>
                </div>
            </div>
        </div>

        <!-- Sea Animals Section -->
        <div id="sea" class="lesson-section">
            <h2>ğŸŸ Sea Animals</h2>
            
            <div class="game-grid">
                <div class="game-card">
                    <div class="game-header">
                        <span class="game-icon">ğŸŸ</span>
                        <h3 class="game-title">Sea Animal Vocabulary</h3>
                        <p class="game-description">Learn 8 sea animals</p>
                    </div>
                    
                    <div class="vocab-grid">
                        <div class="vocab-item" onclick="playAudio('fish')">
                            <span class="vocab-emoji">ğŸŸ</span>
                            <span class="vocab-word">fish</span>
                        </div>
                        <div class="vocab-item" onclick="playAudio('turtle')">
                            <span class="vocab-emoji">ğŸ¢</span>
                            <span class="vocab-word">turtle</span>
                        </div>
                        <div class="vocab-item" onclick="playAudio('dolphin')">
                            <span class="vocab-emoji">ğŸ¬</span>
                            <span class="vocab-word">dolphin</span>
                        </div>
                        <div class="vocab-item" onclick="playAudio('shark')">
                            <span class="vocab-emoji">ğŸ¦ˆ</span>
                            <span class="vocab-word">shark</span>
                        </div>
                        <div class="vocab-item" onclick="playAudio('whale')">
                            <span class="vocab-emoji">ğŸ‹</span>
                            <span class="vocab-word">whale</span>
                        </div>
                        <div class="vocab-item" onclick="playAudio('octopus')">
                            <span class="vocab-emoji">ğŸ™</span>
                            <span class="vocab-word">octopus</span>
                        </div>
                        <div class="vocab-item" onclick="playAudio('crab')">
                            <span class="vocab-emoji">ğŸ¦€</span>
                            <span class="vocab-word">crab</span>
                        </div>
                        <div class="vocab-item" onclick="playAudio('starfish')">
                            <span class="vocab-emoji">â­</span>
                            <span class="vocab-word">starfish</span>
                        </div>
                    </div>
                    
                    <button class="play-button" onclick="startSeaGame()">ğŸ® Sea Animals Game</button>
                </div>
            </div>
        </div>

        <!-- Prepositions Section -->
        <div id="prepositions" class="lesson-section">
            <h2>ğŸ“ Prepositions of Place</h2>
            
            <div class="game-grid">
                <div class="game-card">
                    <div class="game-header">
                        <span class="game-icon">ğŸ“</span>
                        <h3 class="game-title">Interactive Preposition Practice</h3>
                        <p class="game-description">Drag animals to practice prepositions</p>
                    </div>
                    
                    <div class="preposition-demo">
                        <h4>ğŸ¯ Where Is The Animal? Visual Quiz</h4>
                        <p style="margin: 10px 0; color: #666;">Look at the picture and answer: Where is the animal?</p>
                        
                        <!-- Preposition Buttons -->
                        <div style="margin: 15px 0;">
                            <span class="preposition-item" onclick="playAudio('in')">in</span>
                            <span class="preposition-item" onclick="playAudio('on')">on</span>
                            <span class="preposition-item" onclick="playAudio('under')">under</span>
                            <span class="preposition-item" onclick="playAudio('next to')">next to</span>
                            <span class="preposition-item" onclick="playAudio('behind')">behind</span>
                            <span class="preposition-item" onclick="playAudio('in front of')">in front of</span>
                        </div>

                        <!-- Visual Quiz Area -->
                        <div id="prepositionQuiz" class="preposition-playground">
                            <div id="animalScene" style="text-align: center; font-size: 48px; padding: 30px; background: #f0f8ff; border: 2px solid #ddd; border-radius: 10px; min-height: 200px; display: flex; align-items: center; justify-content: center;">
                                ğŸ¯ Click "Next Question" to start!
                            </div>
                        </div>

                        <!-- Question Display -->
                        <div id="questionDisplay" class="preposition-sentence">
                            ğŸ¯ Click "Next Question" to start the quiz!
                        </div>

                                    <!-- Answer Options -->
            <div id="answerOptions" style="display: none; text-align: center; margin: 20px 0;">
                <button class="answer-btn" onclick="checkAnswer('behind')" style="margin: 5px; padding: 10px 20px; background: #e3f2fd; border: 2px solid #2196f3; border-radius: 8px; cursor: pointer; font-size: 16px;">behind</button>
                <button class="answer-btn" onclick="checkAnswer('in front of')" style="margin: 5px; padding: 10px 20px; background: #e3f2fd; border: 2px solid #2196f3; border-radius: 8px; cursor: pointer; font-size: 16px;">in front of</button>
                <button class="answer-btn" onclick="checkAnswer('next to')" style="margin: 5px; padding: 10px 20px; background: #e3f2fd; border: 2px solid #2196f3; border-radius: 8px; cursor: pointer; font-size: 16px;">next to</button>
                <button class="answer-btn" onclick="checkAnswer('under')" style="margin: 5px; padding: 10px 20px; background: #e3f2fd; border: 2px solid #2196f3; border-radius: 8px; cursor: pointer; font-size: 16px;">under</button>
                <button class="answer-btn" onclick="checkAnswer('on')" style="margin: 5px; padding: 10px 20px; background: #e3f2fd; border: 2px solid #2196f3; border-radius: 8px; cursor: pointer; font-size: 16px;">on</button>
                <button class="answer-btn" onclick="checkAnswer('in')" style="margin: 5px; padding: 10px 20px; background: #e3f2fd; border: 2px solid #2196f3; border-radius: 8px; cursor: pointer; font-size: 16px;">in</button>
            </div>

                        <!-- Game Buttons -->
                        <div style="margin: 20px 0; text-align: center;">
                            <button class="play-button" onclick="startPrepositionQuiz()">ğŸ® Next Question</button>
                            <button class="play-button" onclick="showAnswer()">ğŸ’¡ Show Answer</button>
                            <button class="play-button" onclick="resetQuiz()">ğŸ”„ Reset Quiz</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Integration Section -->
        <div id="integration" class="lesson-section">
            <h2>ğŸ¯ Integration Games</h2>
            
            <div class="game-grid">
                <div class="game-card">
                    <div class="game-header">
                        <span class="game-icon">ğŸ¯</span>
                        <h3 class="game-title">Animal Classification</h3>
                        <p class="game-description">Sort animals by habitat</p>
                    </div>
                    
                    <div style="text-align: center; margin: 20px 0;">
                        <div class="animal-category" onclick="selectCategory('zoo')">ğŸ¦ Zoo</div>
                        <div class="animal-category" onclick="selectCategory('farm')">ğŸ„ Farm</div>
                        <div class="animal-category" onclick="selectCategory('sea')">ğŸŸ Sea</div>
                    </div>
                    
                    <button class="play-button" onclick="startClassificationGame()">ğŸ® Sort Animals</button>
                </div>

                <div class="game-card">
                    <div class="game-header">
                        <span class="game-icon">ğŸŒˆ</span>
                        <h3 class="game-title">Complete Integration</h3>
                        <p class="game-description">Use all vocabulary together</p>
                    </div>
                    
                    <div class="integration-example">
                        "There are seven gray elephants and eight orange tigers in the zoo."
                    </div>
                    <div class="integration-example">
                        "On the farm, there are six brown cows behind the red house."
                    </div>
                    <div class="integration-example">
                        "In the sea, there are ten colorful fish under the water."
                    </div>
                    
                    <button class="play-button" onclick="startIntegrationChallenge()">ğŸ® Integration Challenge</button>
                </div>
            </div>
        </div>

        <!-- Celebration Modal -->
        <div class="overlay" id="overlay"></div>
        <div class="celebration" id="celebration">
            <h2>ğŸ‰ Fantastic Work! ğŸ‰</h2>
            <p id="celebrationMessage">You completed the activity!</p>
            <button class="play-button" onclick="hideCelebration()">Continue Learning</button>
        </div>
    </div>

    <script>
        // Global game state
        let currentScore = 0;
        let currentQuestion = 1;
        let gameInProgress = false;

        // Audio system
        function playAudio(word) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.rate = 0.8;
                utterance.pitch = 1.1;
                utterance.volume = 0.8;
                speechSynthesis.speak(utterance);
            }
            
            // Visual feedback
            if (event && event.target) {
                event.target.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    event.target.style.transform = 'scale(1)';
                }, 200);
            }
        }

        function playNumberAudio(numberWord) {
            playAudio(numberWord);
        }

        // Section management
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.lesson-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active from all tabs
            document.querySelectorAll('.tab-button').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Activate corresponding tab
            event.target.classList.add('active');
        }

        // Review games
        function startReviewGame(type) {
            let message = '';
            switch(type) {
                case 'family':
                    message = 'Practice saying: "Hello! This is my father. He has brown hair."';
                    break;
                case 'shapes':
                    message = 'Look around and say: "I found a red circle clock. There are five rectangle books."';
                    break;
                case 'house':
                    message = 'Describe: "In my kitchen, there are two rectangle windows. I use a blue pen."';
                    break;
            }
            showCelebration(message);
        }

        // Numbers games
        let countingGameData = [
            {question: "How many books?", emoji: "ğŸ“š", count: 6},
            {question: "How many pencils?", emoji: "âœï¸", count: 7},
            {question: "How many chairs?", emoji: "ğŸª‘", count: 8},
            {question: "How many windows?", emoji: "ğŸªŸ", count: 9},
            {question: "How many computers?", emoji: "ğŸ’»", count: 10}
        ];

        let currentCountingIndex = 0;
        let countingScore = 0;

        function startNumbersGame() {
            currentCountingIndex = 0;
            countingScore = 0;
            generateCountingQuestion();
        }

        function generateCountingQuestion() {
            if (currentCountingIndex >= countingGameData.length) {
                showCelebration(`Excellent counting! Final score: ${countingScore}/500`);
                return;
            }
            
            const data = countingGameData[currentCountingIndex];
            document.getElementById('countingQuestion').textContent = data.question;
            document.getElementById('objectsToCount').textContent = data.emoji.repeat(data.count);
            document.getElementById('countingScore').textContent = countingScore;
        }

        function selectCount(selectedNumber) {
            const correctAnswer = countingGameData[currentCountingIndex].count;
            
            if (selectedNumber === correctAnswer) {
                countingScore += 100;
                currentCountingIndex++;
                setTimeout(() => {
                    if (currentCountingIndex < countingGameData.length) {
                        generateCountingQuestion();
                    } else {
                        showCelebration(`Perfect counting! You scored ${countingScore} points!`);
                    }
                }, 500);
            } else {
                countingScore = Math.max(0, countingScore - 20);
                document.getElementById('countingScore').textContent = countingScore;
            }
        }

        // Animal games
        const zooAnimals = ['ğŸ’', 'ğŸ˜', 'ğŸ…', 'ğŸ»', 'ğŸ¦’', 'ğŸ¦', 'ğŸ¦“', 'ğŸ¦˜'];
        const farmAnimals = ['ğŸ„', 'ğŸ´', 'ğŸ‘', 'ğŸ”', 'ğŸ¦†', 'ğŸ', 'ğŸ·'];
        const seaAnimals = ['ğŸŸ', 'ğŸ¢', 'ğŸ¬', 'ğŸ¦ˆ', 'ğŸ‹', 'ğŸ™', 'ğŸ¦€', 'â­'];

        function startZooGame() {
            const randomCount = Math.floor(Math.random() * 5) + 6; // 6-10
            const randomAnimal = zooAnimals[Math.floor(Math.random() * zooAnimals.length)];
            
            document.getElementById('animalScene').innerHTML = `
                <div style="text-align: center; padding: 30px;">
                    <h3 style="color: #333; margin-bottom: 20px;">ğŸ¦ Zoo Counting Challenge!</h3>
                    <p style="font-size: 18px; margin-bottom: 30px;">Count the zoo animals carefully:</p>
                    <div style="font-size: 60px; margin: 30px 0; line-height: 1.2;">
                        ${randomAnimal.repeat(randomCount)}
                    </div>
                    <p style="font-size: 20px; color: #666; margin-bottom: 30px;">
                        How many ${randomAnimal} do you see?
                    </p>
                    <div style="margin-top: 30px;">
                        <button class="play-button" onclick="checkZooCount(${randomCount-1})" style="margin: 5px;">${randomCount-1}</button>
                        <button class="play-button" onclick="checkZooCount(${randomCount})" style="margin: 5px;">${randomCount}</button>
                        <button class="play-button" onclick="checkZooCount(${randomCount+1})" style="margin: 5px;">${randomCount+1}</button>
                    </div>
                </div>
            `;
            
            window.correctZooCount = randomCount;
            playAudio(`Count the zoo animals: How many ${randomAnimal} do you see?`);
        }

        function checkZooCount(selectedCount) {
            const isCorrect = (selectedCount === window.correctZooCount);
            
            if (isCorrect) {
                document.getElementById('animalScene').innerHTML += `
                    <div style="color: green; font-size: 24px; font-weight: bold; margin-top: 20px;">
                        ğŸ‰ Excellent counting! You found ${window.correctZooCount} animals!
                    </div>
                `;
                playAudio(`Excellent counting! You found ${window.correctZooCount} animals!`);
            } else {
                document.getElementById('animalScene').innerHTML += `
                    <div style="color: orange; font-size: 24px; font-weight: bold; margin-top: 20px;">
                        ğŸ¤” Try counting again! The correct answer was ${window.correctZooCount}.
                    </div>
                `;
                playAudio(`Try counting again! The correct answer was ${window.correctZooCount}.`);
            }
            
            setTimeout(() => {
                startZooGame(); // Start another round
            }, 3000);
        }

        function startFarmGame() {
            // Create a mix of farm and non-farm animals
            const allAnimalsPool = [...farmAnimals, ...zooAnimals.slice(0, 3), ...seaAnimals.slice(0, 2)];
            const shuffledAnimals = allAnimalsPool.sort(() => Math.random() - 0.5).slice(0, 8);
            
            document.getElementById('animalScene').innerHTML = `
                <div style="text-align: center; padding: 30px;">
                    <h3 style="color: #333; margin-bottom: 20px;">ğŸ„ Farm Animal Sorting!</h3>
                    <p style="font-size: 18px; margin-bottom: 30px;">Click ONLY the farm animals:</p>
                    <div style="font-size: 60px; margin: 30px 0; display: flex; flex-wrap: wrap; justify-content: center; gap: 15px;">
                        ${shuffledAnimals.map((animal, index) => 
                            `<span style="cursor: pointer; border: 2px solid #ddd; border-radius: 10px; padding: 10px; margin: 5px;" onclick="selectFarmAnimal('${animal}', ${index})" id="animal-${index}">${animal}</span>`
                        ).join('')}
                    </div>
                    <div id="farmResult" style="margin-top: 20px; font-size: 18px;"></div>
                </div>
            `;
            
            window.farmAnimalsSelected = [];
            window.farmAnimalsTest = shuffledAnimals;
            playAudio('Click only the farm animals. Which animals live on a farm?');
        }

        function selectFarmAnimal(animal, index) {
            const element = document.getElementById(`animal-${index}`);
            const isFarmAnimal = farmAnimals.includes(animal);
            
            if (isFarmAnimal) {
                element.style.border = '3px solid green';
                element.style.background = '#e8f5e8';
                window.farmAnimalsSelected.push(animal);
                playAudio('Correct! This lives on a farm.');
            } else {
                element.style.border = '3px solid red';
                element.style.background = '#ffe8e8';
                playAudio('This animal doesn\'t live on a farm.');
            }
            
            element.onclick = null; // Disable further clicks
            
            // Check if all farm animals have been found
            const allFarmAnimalsInTest = window.farmAnimalsTest.filter(a => farmAnimals.includes(a));
            if (window.farmAnimalsSelected.length === allFarmAnimalsInTest.length) {
                setTimeout(() => {
                    document.getElementById('farmResult').innerHTML = `
                        <div style="color: green; font-weight: bold;">ğŸ‰ Great job! You found all ${allFarmAnimalsInTest.length} farm animals!</div>
                    `;
                    playAudio(`Great job! You found all the farm animals!`);
                }, 500);
            }
        }

        function startSeaGame() {
            // Create an interactive sea animal identification game
            const randomSeaAnimal = seaAnimals[Math.floor(Math.random() * seaAnimals.length)];
            const animalFacts = {
                'ğŸŸ': 'Fish swim in schools and breathe through gills',
                'ğŸ¢': 'Sea turtles can live over 100 years',
                'ğŸ¬': 'Dolphins are very intelligent marine mammals',
                'ğŸ¦ˆ': 'Sharks have been around for 400 million years',
                'ğŸ‹': 'Blue whales are the largest animals on Earth',
                'ğŸ™': 'Octopuses have three hearts and blue blood',
                'ğŸ¦€': 'Crabs walk sideways and have hard shells',
                'â­': 'Starfish can regrow their lost arms'
            };
            
            document.getElementById('animalScene').innerHTML = `
                <div style="text-align: center; padding: 30px;">
                    <h3 style="color: #333; margin-bottom: 20px;">ğŸŒŠ Sea Animal Discovery!</h3>
                    <div style="font-size: 120px; margin: 30px 0;">${randomSeaAnimal}</div>
                    <div style="font-size: 18px; color: #666; margin-bottom: 30px; max-width: 400px; margin-left: auto; margin-right: auto;">
                        ${animalFacts[randomSeaAnimal]}
                    </div>
                    <div style="margin-top: 30px;">
                        <button class="play-button" onclick="nextSeaAnimal()" style="margin: 10px;">ğŸŒŠ Discover Another Sea Animal</button>
                        <button class="play-button" onclick="seaAnimalQuiz()" style="margin: 10px;">ğŸ§  Take Sea Animal Quiz</button>
                    </div>
                </div>
            `;
            
            playAudio(`This is a ${randomSeaAnimal}. ${animalFacts[randomSeaAnimal]}`);
        }

        function nextSeaAnimal() {
            startSeaGame(); // Show another random sea animal
        }

        function seaAnimalQuiz() {
            const quizAnimals = seaAnimals.slice(0, 4); // Use first 4 sea animals
            const correctAnimal = quizAnimals[Math.floor(Math.random() * quizAnimals.length)];
            
            document.getElementById('animalScene').innerHTML = `
                <div style="text-align: center; padding: 30px;">
                    <h3 style="color: #333; margin-bottom: 20px;">ğŸŒŠ Sea Animal Quiz!</h3>
                    <p style="font-size: 18px; margin-bottom: 30px;">Which of these lives in the sea?</p>
                    <div style="margin: 30px 0;">
                        ${[correctAnimal, 'ğŸ„', 'ğŸ¦', 'ğŸ”'].sort(() => Math.random() - 0.5).map(animal => 
                            `<button class="play-button" onclick="checkSeaQuiz('${animal}', '${correctAnimal}')" style="margin: 10px; font-size: 40px; padding: 20px;">${animal}</button>`
                        ).join('')}
                    </div>
                </div>
            `;
            
            playAudio('Which of these animals lives in the sea?');
        }

        function checkSeaQuiz(selected, correct) {
            const isCorrect = (selected === correct);
            
            if (isCorrect) {
                document.getElementById('animalScene').innerHTML += `
                    <div style="color: green; font-size: 24px; font-weight: bold; margin-top: 20px;">
                        ğŸ‰ Correct! ${selected} lives in the sea!
                    </div>
                `;
                playAudio(`Correct! ${selected} lives in the sea!`);
            } else {
                document.getElementById('animalScene').innerHTML += `
                    <div style="color: orange; font-size: 24px; font-weight: bold; margin-top: 20px;">
                        ğŸ¤” Not quite! ${correct} lives in the sea.
                    </div>
                `;
                playAudio(`Not quite! ${correct} lives in the sea.`);
            }
            
            setTimeout(() => {
                startSeaGame();
            }, 3000);
        }

        // Visual Preposition Quiz System
        let currentQuizQuestion = 0;
        let correctAnswer = '';
        let quizScore = 0;
        
        const prepositionQuestions = [
            // BEHIND scenarios - Using depth perspective and clear layering
            {
                scene: '<div style="background: linear-gradient(45deg, #e3f2fd, #f3e5f5); padding: 20px; border-radius: 10px; position: relative; width: 200px; height: 120px; margin: 0 auto;"><div style="position: absolute; bottom: 40px; left: 30px; font-size: 70px; filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.3));">ğŸ„</div><div style="position: absolute; bottom: 50px; left: 90px; font-size: 45px; opacity: 0.7; filter: blur(1px);">ğŸ¶</div><div style="position: absolute; bottom: 10px; left: 10px; font-size: 12px; color: #666;">Front â† â†’ Back</div></div>',
                question: 'Where is the dog?',
                answer: 'behind',
                description: 'The dog is behind the cow'
            },
            {
                scene: '<div style="background: linear-gradient(45deg, #fff3e0, #fce4ec); padding: 20px; border-radius: 10px; position: relative; width: 200px; height: 120px; margin: 0 auto;"><div style="position: absolute; bottom: 40px; left: 30px; font-size: 70px; filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.3));">ğŸ´</div><div style="position: absolute; bottom: 50px; left: 90px; font-size: 45px; opacity: 0.6; filter: blur(1px);">ğŸ‘</div><div style="position: absolute; bottom: 10px; left: 10px; font-size: 12px; color: #666;">Front â† â†’ Back</div></div>',
                question: 'Where is the sheep?',
                answer: 'behind',
                description: 'The sheep is behind the horse'
            },
            {
                scene: '<div style="background: linear-gradient(45deg, #e8f5e8, #fff9c4); padding: 20px; border-radius: 10px; position: relative; width: 200px; height: 120px; margin: 0 auto;"><div style="position: absolute; bottom: 40px; left: 30px; font-size: 70px; filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.3));">ğŸ˜</div><div style="position: absolute; bottom: 52px; left: 95px; font-size: 40px; opacity: 0.7; filter: blur(1px);">ğŸ’</div><div style="position: absolute; bottom: 10px; left: 10px; font-size: 12px; color: #666;">Front â† â†’ Back</div></div>',
                question: 'Where is the monkey?',
                answer: 'behind',
                description: 'The monkey is behind the elephant'
            },

            // UNDER scenarios - Much clearer with thick floor lines and shadows
            {
                scene: '<div style="background: linear-gradient(180deg, #e1f5fe, #f3e5f5); padding: 15px; border-radius: 10px; position: relative; width: 180px; height: 160px; margin: 0 auto;"><div style="position: absolute; top: 15px; left: 50%; transform: translateX(-50%); font-size: 65px; filter: drop-shadow(0px 8px 15px rgba(0,0,0,0.4));">ğŸ“¦</div><div style="position: absolute; top: 85px; left: 10px; right: 10px; height: 8px; background: linear-gradient(to bottom, rgba(0,0,0,0.2), rgba(0,0,0,0.05)); border-radius: 4px; box-shadow: 0 2px 5px rgba(0,0,0,0.2);"></div><div style="position: absolute; bottom: 15px; left: 50%; transform: translateX(-50%); font-size: 45px;">ğŸ±</div><div style="position: absolute; bottom: 5px; right: 5px; font-size: 10px; color: #666;">UNDER</div></div>',
                question: 'Where is the cat?',
                answer: 'under',
                description: 'The cat is under the box'
            },
            {
                scene: '<div style="background: linear-gradient(180deg, #f3e5f5, #e8f5e8); padding: 15px; border-radius: 10px; position: relative; width: 180px; height: 160px; margin: 0 auto;"><div style="position: absolute; top: 20px; left: 50%; transform: translateX(-50%); font-size: 60px; filter: drop-shadow(0px 8px 15px rgba(0,0,0,0.4));">ğŸš—</div><div style="position: absolute; top: 85px; left: 15px; right: 15px; height: 8px; background: linear-gradient(to bottom, rgba(0,0,0,0.2), rgba(0,0,0,0.05)); border-radius: 4px; box-shadow: 0 2px 5px rgba(0,0,0,0.2);"></div><div style="position: absolute; bottom: 15px; left: 50%; transform: translateX(-50%); font-size: 35px;">ğŸ­</div><div style="position: absolute; bottom: 5px; right: 5px; font-size: 10px; color: #666;">UNDER</div></div>',
                question: 'Where is the mouse?',
                answer: 'under',
                description: 'The mouse is under the car'
            },
            {
                scene: '<div style="background: linear-gradient(180deg, #fff3e0, #e1f5fe); padding: 15px; border-radius: 10px; position: relative; width: 180px; height: 160px; margin: 0 auto;"><div style="position: absolute; top: 15px; left: 50%; transform: translateX(-50%); font-size: 65px; filter: drop-shadow(0px 8px 15px rgba(0,0,0,0.4));">â˜‚ï¸</div><div style="position: absolute; top: 85px; left: 10px; right: 10px; height: 8px; background: linear-gradient(to bottom, rgba(0,0,0,0.2), rgba(0,0,0,0.05)); border-radius: 4px; box-shadow: 0 2px 5px rgba(0,0,0,0.2);"></div><div style="position: absolute; bottom: 15px; left: 50%; transform: translateX(-50%); font-size: 40px;">ğŸ¸</div><div style="position: absolute; bottom: 5px; right: 5px; font-size: 10px; color: #666;">UNDER</div></div>',
                question: 'Where is the frog?',
                answer: 'under',
                description: 'The frog is under the umbrella'
            },

            // ON scenarios - Clear stacking with animals ON TOP of objects
            {
                scene: '<div style="background: linear-gradient(180deg, #fff9c4, #e8f5e8); padding: 15px; border-radius: 10px; position: relative; width: 180px; height: 160px; margin: 0 auto;"><div style="position: absolute; bottom: 15px; left: 50%; transform: translateX(-50%); font-size: 65px; filter: drop-shadow(0px 4px 8px rgba(0,0,0,0.3));">ğŸ“¦</div><div style="position: absolute; top: 15px; left: 50%; transform: translateX(-50%); font-size: 45px; filter: drop-shadow(0px 2px 5px rgba(0,0,0,0.3));">ğŸ±</div><div style="position: absolute; top: 70px; left: 15px; right: 15px; height: 6px; background: linear-gradient(to bottom, rgba(0,0,0,0.1), rgba(0,0,0,0.02)); border-radius: 3px;"></div><div style="position: absolute; top: 5px; right: 5px; font-size: 10px; color: #666;">ON TOP</div></div>',
                question: 'Where is the cat?',
                answer: 'on',
                description: 'The cat is on the box'
            },
            {
                scene: '<div style="background: linear-gradient(180deg, #fce4ec, #f3e5f5); padding: 15px; border-radius: 10px; position: relative; width: 180px; height: 160px; margin: 0 auto;"><div style="position: absolute; bottom: 15px; left: 50%; transform: translateX(-50%); font-size: 60px; filter: drop-shadow(0px 4px 8px rgba(0,0,0,0.3));">ğŸš—</div><div style="position: absolute; top: 15px; left: 50%; transform: translateX(-50%); font-size: 40px; filter: drop-shadow(0px 2px 5px rgba(0,0,0,0.3));">ğŸ¦</div><div style="position: absolute; top: 65px; left: 20px; right: 20px; height: 6px; background: linear-gradient(to bottom, rgba(0,0,0,0.1), rgba(0,0,0,0.02)); border-radius: 3px;"></div><div style="position: absolute; top: 5px; right: 5px; font-size: 10px; color: #666;">ON TOP</div></div>',
                question: 'Where is the bird?',
                answer: 'on',
                description: 'The bird is on the car'
            },
            {
                scene: '<div style="background: linear-gradient(180deg, #e1f5fe, #fff3e0); padding: 15px; border-radius: 10px; position: relative; width: 180px; height: 160px; margin: 0 auto;"><div style="position: absolute; bottom: 15px; left: 50%; transform: translateX(-50%); font-size: 65px; filter: drop-shadow(0px 4px 8px rgba(0,0,0,0.3));">ğŸ </div><div style="position: absolute; top: 15px; left: 50%; transform: translateX(-50%); font-size: 40px; filter: drop-shadow(0px 2px 5px rgba(0,0,0,0.3));">ğŸ±</div><div style="position: absolute; top: 70px; left: 15px; right: 15px; height: 6px; background: linear-gradient(to bottom, rgba(0,0,0,0.1), rgba(0,0,0,0.02)); border-radius: 3px;"></div><div style="position: absolute; top: 5px; right: 5px; font-size: 10px; color: #666;">ON TOP</div></div>',
                question: 'Where is the cat?',
                answer: 'on',
                description: 'The cat is on the house'
            },

            // IN scenarios - Animals clearly INSIDE containers/objects
            {
                scene: '<div style="background: linear-gradient(45deg, #e8f5e8, #e1f5fe); padding: 20px; border-radius: 10px; position: relative; width: 200px; height: 140px; margin: 0 auto;"><div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 120px; height: 80px; border: 6px solid #8bc34a; border-radius: 15px; background: rgba(139, 195, 74, 0.1); display: flex; align-items: center; justify-content: center;"><span style="font-size: 45px;">ğŸ </span></div><div style="position: absolute; bottom: 5px; left: 5px; font-size: 12px; color: #666;">ğŸ  IN ğŸª£</div><div style="position: absolute; top: 5px; right: 5px; font-size: 10px; color: #666;">INSIDE</div></div>',
                question: 'Where is the fish?',
                answer: 'in',
                description: 'The fish is in the bowl'
            },
            {
                scene: '<div style="background: linear-gradient(45deg, #fff3e0, #fce4ec); padding: 20px; border-radius: 10px; position: relative; width: 200px; height: 140px; margin: 0 auto;"><div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 130px; height: 90px; border: 6px solid #ff9800; border-radius: 10px; background: rgba(255, 152, 0, 0.1); display: flex; align-items: center; justify-content: center;"><span style="font-size: 40px;">ğŸ­</span></div><div style="position: absolute; bottom: 5px; left: 5px; font-size: 12px; color: #666;">ğŸ­ IN ğŸ“¦</div><div style="position: absolute; top: 5px; right: 5px; font-size: 10px; color: #666;">INSIDE</div></div>',
                question: 'Where is the mouse?',
                answer: 'in',
                description: 'The mouse is in the box'
            },
            {
                scene: '<div style="background: linear-gradient(45deg, #f3e5f5, #fff9c4); padding: 20px; border-radius: 10px; position: relative; width: 200px; height: 140px; margin: 0 auto;"><div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 120px; height: 85px; border: 6px solid #9c27b0; border-radius: 12px; background: rgba(156, 39, 176, 0.1); display: flex; align-items: center; justify-content: center;"><span style="font-size: 42px;">ğŸ¸</span></div><div style="position: absolute; bottom: 5px; left: 5px; font-size: 12px; color: #666;">ğŸ¸ IN ğŸ </div><div style="position: absolute; top: 5px; right: 5px; font-size: 10px; color: #666;">INSIDE</div></div>',
                question: 'Where is the frog?',
                answer: 'in',
                description: 'The frog is in the house'
            },

            // NEXT TO scenarios - Using clear side-by-side positioning with separators
            {
                scene: '<div style="background: linear-gradient(90deg, #e8f5e8, #fff9c4); padding: 25px; border-radius: 10px; display: flex; align-items: center; justify-content: center; gap: 20px; width: 200px; margin: 0 auto;"><span style="font-size: 55px; filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.2));">ğŸ°</span><div style="width: 3px; height: 60px; background: rgba(0,0,0,0.1); border-radius: 2px;"></div><span style="font-size: 55px; filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.2));">ğŸŒ³</span></div>',
                question: 'Where is the rabbit?',
                answer: 'next to',
                description: 'The rabbit is next to the tree'
            },
            {
                scene: '<div style="background: linear-gradient(90deg, #e1f5fe, #fce4ec); padding: 25px; border-radius: 10px; display: flex; align-items: center; justify-content: center; gap: 20px; width: 200px; margin: 0 auto;"><span style="font-size: 50px; filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.2));">ğŸ¦</span><div style="width: 3px; height: 60px; background: rgba(0,0,0,0.1); border-radius: 2px;"></div><span style="font-size: 55px; filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.2));">ğŸ </span></div>',
                question: 'Where is the bird?',
                answer: 'next to',
                description: 'The bird is next to the house'
            },
            {
                scene: '<div style="background: linear-gradient(90deg, #fff3e0, #e8f5e8); padding: 25px; border-radius: 10px; display: flex; align-items: center; justify-content: center; gap: 20px; width: 200px; margin: 0 auto;"><span style="font-size: 50px; filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.2));">ğŸ±</span><div style="width: 3px; height: 60px; background: rgba(0,0,0,0.1); border-radius: 2px;"></div><span style="font-size: 50px; filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.2));">ğŸ¶</span></div>',
                question: 'Where is the cat?',
                answer: 'next to',
                description: 'The cat is next to the dog'
            },

            // IN FRONT OF scenarios - Using bright foreground with dimmed background
            {
                scene: '<div style="background: linear-gradient(45deg, #fff9c4, #e1f5fe); padding: 20px; border-radius: 10px; position: relative; width: 200px; height: 120px; margin: 0 auto;"><div style="position: absolute; bottom: 40px; left: 90px; font-size: 60px; opacity: 0.4; filter: blur(2px);">ğŸ„</div><div style="position: absolute; bottom: 45px; left: 40px; font-size: 50px; filter: drop-shadow(3px 3px 6px rgba(0,0,0,0.4)); z-index: 2;">ğŸ¶</div><div style="position: absolute; bottom: 10px; left: 10px; font-size: 12px; color: #666;">Front â† â†’ Back</div></div>',
                question: 'Where is the dog?',
                answer: 'in front of',
                description: 'The dog is in front of the cow'
            },
            {
                scene: '<div style="background: linear-gradient(45deg, #fce4ec, #f3e5f5); padding: 20px; border-radius: 10px; position: relative; width: 200px; height: 120px; margin: 0 auto;"><div style="position: absolute; bottom: 40px; left: 90px; font-size: 60px; opacity: 0.4; filter: blur(2px);">ğŸ´</div><div style="position: absolute; bottom: 45px; left: 40px; font-size: 45px; filter: drop-shadow(3px 3px 6px rgba(0,0,0,0.4)); z-index: 2;">ğŸ‘</div><div style="position: absolute; bottom: 10px; left: 10px; font-size: 12px; color: #666;">Front â† â†’ Back</div></div>',
                question: 'Where is the sheep?',
                answer: 'in front of',
                description: 'The sheep is in front of the horse'
            }
        ];

        function startPrepositionQuiz() {
            if (currentQuizQuestion >= prepositionQuestions.length) {
                currentQuizQuestion = 0; // Reset to beginning
                showCelebration(`ğŸ‰ Quiz Complete! You got ${quizScore} out of ${prepositionQuestions.length} correct!`);
                quizScore = 0;
                return;
            }
            
            const question = prepositionQuestions[currentQuizQuestion];
            document.getElementById('animalScene').innerHTML = question.scene;
            document.getElementById('questionDisplay').textContent = question.question;
            document.getElementById('answerOptions').style.display = 'block';
            
            correctAnswer = question.answer;
            
            // Reset answer button colors
            document.querySelectorAll('.answer-btn').forEach(btn => {
                btn.style.background = '#e3f2fd';
                btn.style.border = '2px solid #2196f3';
                btn.disabled = false;
            });
            
            playAudio(question.question);
        }

        function checkAnswer(selectedAnswer) {
            const question = prepositionQuestions[currentQuizQuestion];
            
            // Disable all buttons
            document.querySelectorAll('.answer-btn').forEach(btn => {
                btn.disabled = true;
            });
            
            // Color the buttons
            document.querySelectorAll('.answer-btn').forEach(btn => {
                if (btn.textContent === correctAnswer) {
                    btn.style.background = '#c8e6c9'; // Green for correct
                    btn.style.border = '2px solid #4caf50';
                } else if (btn.textContent === selectedAnswer && selectedAnswer !== correctAnswer) {
                    btn.style.background = '#ffcdd2'; // Red for wrong selection
                    btn.style.border = '2px solid #f44336';
                }
            });
            
            if (selectedAnswer === correctAnswer) {
                quizScore++;
                document.getElementById('questionDisplay').textContent = `âœ… Correct! ${question.description}`;
                playAudio(`Correct! ${question.description}`);
            } else {
                document.getElementById('questionDisplay').textContent = `âŒ Not quite. ${question.description}`;
                playAudio(`Not quite. ${question.description}`);
            }
            
            currentQuizQuestion++;
            
            // Auto-advance after 3 seconds
            setTimeout(() => {
                if (currentQuizQuestion < prepositionQuestions.length) {
                    startPrepositionQuiz();
                } else {
                    showCelebration(`ğŸ‰ Quiz Complete! You got ${quizScore} out of ${prepositionQuestions.length} correct!`);
                    quizScore = 0;
                    currentQuizQuestion = 0;
                }
            }, 3000);
        }

        function showAnswer() {
            const question = prepositionQuestions[currentQuizQuestion];
            document.getElementById('questionDisplay').textContent = `ğŸ’¡ ${question.description}`;
            playAudio(question.description);
            
            // Highlight correct answer
            document.querySelectorAll('.answer-btn').forEach(btn => {
                if (btn.textContent === correctAnswer) {
                    btn.style.background = '#c8e6c9';
                    btn.style.border = '2px solid #4caf50';
                }
            });
        }

        function resetQuiz() {
            currentQuizQuestion = 0;
            quizScore = 0;
            document.getElementById('animalScene').innerHTML = 'ğŸ¯ Click "Next Question" to start!';
            document.getElementById('questionDisplay').textContent = 'ğŸ¯ Click "Next Question" to start the quiz!';
            document.getElementById('answerOptions').style.display = 'none';
            playAudio('Quiz reset. Ready to start again!');
        }

        // Classification games
        let selectedCategory = '';
        let classificationScore = 0;
        let currentClassificationRound = 0;
        const maxClassificationRounds = 5;

        function selectCategory(category) {
            selectedCategory = category;
            document.querySelectorAll('.animal-category').forEach(cat => {
                cat.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function startClassificationGame() {
            if (!selectedCategory) {
                alert('Please select a category first!');
                return;
            }
            
            classificationScore = 0;
            currentClassificationRound = 0;
            
            let categoryName = selectedCategory.charAt(0).toUpperCase() + selectedCategory.slice(1);
            playAudio(`Starting ${categoryName} Animal Classification Game!`);
            
            nextClassificationRound();
        }

        function nextClassificationRound() {
            if (currentClassificationRound >= maxClassificationRounds) {
                showCelebration(`ğŸ‰ Classification Complete! You got ${classificationScore}/${maxClassificationRounds} correct! Great job learning about ${selectedCategory} animals!`);
                return;
            }
            
            currentClassificationRound++;
            
            // Create a mixed set of animals for classification
            const allAnimals = {
                'zoo': ['ğŸ¦', 'ğŸ˜', 'ğŸ…', 'ğŸ»', 'ğŸ¦’', 'ğŸ’', 'ğŸ¦“', 'ğŸ¦˜'],
                'farm': ['ğŸ„', 'ğŸ´', 'ğŸ‘', 'ğŸ”', 'ğŸ¦†', 'ğŸ', 'ğŸ·'],
                'sea': ['ğŸŸ', 'ğŸ¢', 'ğŸ¬', 'ğŸ¦ˆ', 'ğŸ‹', 'ğŸ™', 'ğŸ¦€', 'â­']
            };
            
            // Get random animals from the selected category and other categories
            const correctAnimals = allAnimals[selectedCategory];
            const otherCategories = Object.keys(allAnimals).filter(cat => cat !== selectedCategory);
            const wrongAnimals = [];
            
            otherCategories.forEach(cat => {
                wrongAnimals.push(...allAnimals[cat].slice(0, 2)); // Add 2 from each other category
            });
            
            // Pick one correct animal and one wrong animal for this round
            const correctAnimal = correctAnimals[Math.floor(Math.random() * correctAnimals.length)];
            const wrongAnimal = wrongAnimals[Math.floor(Math.random() * wrongAnimals.length)];
            
            // Randomly decide which one to show
            const showCorrect = Math.random() > 0.5;
            const animalToShow = showCorrect ? correctAnimal : wrongAnimal;
            const isCorrect = showCorrect;
            
            // Display the question
            let categoryName = selectedCategory.charAt(0).toUpperCase() + selectedCategory.slice(1);
            let questionText = `Round ${currentClassificationRound}: Does this animal belong in ${categoryName}? ${animalToShow}`;
            
            document.getElementById('animalScene').innerHTML = `
                <div style="text-align: center; padding: 30px;">
                    <h3 style="color: #333; margin-bottom: 20px;">${questionText}</h3>
                    <div style="font-size: 120px; margin: 30px 0;">${animalToShow}</div>
                    <div style="margin-top: 30px;">
                        <button class="play-button" onclick="answerClassification(true)" style="margin: 10px; font-size: 18px;">âœ… YES - This belongs in ${categoryName}</button>
                        <button class="play-button" onclick="answerClassification(false)" style="margin: 10px; font-size: 18px;">âŒ NO - This doesn't belong in ${categoryName}</button>
                    </div>
                    <div style="margin-top: 20px; font-size: 16px; color: #666;">
                        Score: ${classificationScore}/${currentClassificationRound-1} | Round: ${currentClassificationRound}/${maxClassificationRounds}
                    </div>
                </div>
            `;
            
            // Store the correct answer
            window.currentClassificationAnswer = isCorrect;
            
            playAudio(questionText);
        }

        function answerClassification(userAnswer) {
            const isCorrect = (userAnswer === window.currentClassificationAnswer);
            
            if (isCorrect) {
                classificationScore++;
                document.getElementById('animalScene').innerHTML += `
                    <div style="color: green; font-size: 24px; font-weight: bold; margin-top: 20px;">
                        âœ… Correct! Well done!
                    </div>
                `;
                playAudio('Correct! Well done!');
            } else {
                document.getElementById('animalScene').innerHTML += `
                    <div style="color: red; font-size: 24px; font-weight: bold; margin-top: 20px;">
                        âŒ Not quite right. Let's learn more!
                    </div>
                `;
                playAudio('Not quite right. Let\'s learn more!');
            }
            
            // Auto-advance to next round
            setTimeout(() => {
                nextClassificationRound();
            }, 2500);
        }

        function startIntegrationChallenge() {
            const challenges = [
                {
                    text: "Create a sentence with: numbers + colors + animals",
                    example: "Example: 'I see three red birds in the tree.'",
                    prompt: "Now you try! Use numbers, colors, and animals in one sentence."
                },
                {
                    text: "Describe animals using prepositions and colors",
                    example: "Example: 'The brown cat is under the blue car.'",
                    prompt: "Your turn! Describe where a colored animal is located."
                },
                {
                    text: "Count animals in different habitats",
                    example: "Example: 'There are five fish in the sea and two birds on the farm.'",
                    prompt: "Try it! Count animals in zoo, farm, or sea habitats."
                },
                {
                    text: "Use house vocabulary with animals and numbers",
                    example: "Example: 'In my kitchen, there are four windows and one cat.'",
                    prompt: "Your challenge! Combine house rooms with animals and numbers."
                }
            ];
            
            const randomChallenge = challenges[Math.floor(Math.random() * challenges.length)];
            
            document.getElementById('animalScene').innerHTML = `
                <div style="text-align: center; padding: 30px;">
                    <h3 style="color: #333; margin-bottom: 20px;">ğŸ¯ Integration Challenge!</h3>
                    <div style="background: #f0f8ff; padding: 20px; border-radius: 15px; margin: 20px 0;">
                        <h4 style="color: #2196f3; margin-bottom: 15px;">${randomChallenge.text}</h4>
                        <p style="color: #666; font-style: italic; margin-bottom: 15px;">${randomChallenge.example}</p>
                        <p style="color: #333; font-weight: bold;">${randomChallenge.prompt}</p>
                    </div>
                    <div style="margin-top: 30px;">
                        <button class="play-button" onclick="newIntegrationChallenge()" style="margin: 10px;">ğŸ”„ New Challenge</button>
                        <button class="play-button" onclick="showIntegrationHint()" style="margin: 10px;">ğŸ’¡ Need a Hint?</button>
                    </div>
                    <div id="integrationHint" style="margin-top: 20px;"></div>
                </div>
            `;
            
            window.currentChallenge = randomChallenge;
            playAudio(`Integration Challenge: ${randomChallenge.text}. ${randomChallenge.prompt}`);
        }

        function newIntegrationChallenge() {
            startIntegrationChallenge();
        }

        function showIntegrationHint() {
            const hints = {
                "Create a sentence with: numbers + colors + animals": "Try: 'I can see [NUMBER] [COLOR] [ANIMAL] in the [PLACE].'",
                "Describe animals using prepositions and colors": "Try: 'The [COLOR] [ANIMAL] is [PREPOSITION] the [OBJECT].'",
                "Count animals in different habitats": "Try: 'In the [HABITAT], there are [NUMBER] [ANIMALS].'",
                "Use house vocabulary with animals and numbers": "Try: 'In my [ROOM], there are [NUMBER] [THINGS] and [NUMBER] [ANIMALS].'"
            };
            
            const hint = hints[window.currentChallenge.text];
            document.getElementById('integrationHint').innerHTML = `
                <div style="background: #fff3cd; padding: 15px; border-radius: 10px; color: #856404;">
                    <strong>ğŸ’¡ Hint:</strong> ${hint}
                </div>
            `;
            playAudio(`Hint: ${hint}`);
        }

        // Audio function
        function playAudio(text) {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel(); // Stop any current speech
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.rate = 0.8;
                utterance.pitch = 1.1;
                utterance.volume = 0.8;
                window.speechSynthesis.speak(utterance);
            }
        }

        // Celebration system
        function showCelebration(message) {
            document.getElementById('celebrationMessage').textContent = message;
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('celebration').style.display = 'block';
        }

        function hideCelebration() {
            document.getElementById('overlay').style.display = 'none';
            document.getElementById('celebration').style.display = 'none';
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Day 4: Numbers & Animals lesson loaded!');
            generateCountingQuestion(); // Initialize counting game
            
            // Preposition quiz is ready - no initialization needed
        });
          </script>
  </body>
</html> 